(function(b,c,e,d){var h=function(){var a=b(this);a[d]()||(a.addClass(c),"password"===a.attr("type")&&(a.attr("type","text"),a.data(c+"-pwd",!0)),a[d](a.attr(e)))},f=function(){var a=b(this);a.removeClass(c);a.data(c+"-pwd")&&a.attr("type","password");if(a[d]()===a.attr(e))a[d]("")},k=function(){b(this).find("["+e+"]").each(function(){b(this).data(c)&&f.call(this)})};b.fn.placeholdr=function(){e in document.createElement("input")||(b(this).find("["+e+"]").each(function(){var a=b(this);a.data(c)||
(a.data(c,!0),h.call(this),a.focus(f),a.blur(h))}),b(this).find("form").each(function(){var a=b(this);a.data(c)||(a.data(c,!0),a.submit(k))}))};b.fn[d]=b.fn.val;b.fn.val=function(a){var g=b(this);if("undefined"===b.type(a)&&g.data(c)&&g[d]()===g.attr(e))return"";"string"===b.type(a)&&f.call(this);return b.fn[d].apply(this,arguments)};b(function(){b(document).placeholdr()});document.write("<style>.placeholdr{color:#AAA;}</style>")})(jQuery,"placeholdr","placeholder","placeholdrVal");

$(document).ready(function($) {
	//navigation
	$('body').addClass('js');
	  var $menu = $('#menu'),
		  $menulink = $('.menu-link'),
		  $menuTrigger = $('.has-submenu > a');

	$menulink.click(function(e) {
		e.preventDefault();
		$menulink.toggleClass('active');
		$menu.toggleClass('active');
	});

	$menuTrigger.click(function(e) {
		if($(window).width() < 768) {e.preventDefault();}
		var $this = $(this);
		$this.toggleClass("active").next('ul').toggleClass('active');
	});

	//slick
	$('.slider-main').slick({
	   slidesToShow: 1,
	   slidesToScroll: 1,
	   draggable: false,
	   autoplay:true,
	   autoplaySpeed: 8000,
	   fade: true,
	   speed: 2500
	});

	$('.slider-testimonials').slick({
	   slidesToShow: 3,
	   slidesToScroll: 1,
	   draggable: false,
	   autoplay:true,
	   autoplaySpeed: 8000,
	   adaptiveHeight: true,
	   responsive: [
	    {
	      breakpoint: 768,
	      settings: {
	        slidesToShow: 1
	      }
	    }
	  ]

	});

	$('.slider').show();

	$('.match').matchHeight();

	$( "#tabs" ).tabs();

	$( "#accordion" ).accordion({
		collapsible: true,
		heightStyle: "content",
		active: false
	});

	$('[data-fancybox]').fancybox({
        buttons : ['thumbs', 'close'],
		youtube : {
	        controls : 0,
	        showinfo : 0,
			autoplay: 1
	    },
	    vimeo : {
	        color : 'f00'
	    }
    });

	var lazyImages = [].slice.call(document.querySelectorAll(".lazy"));

    if ("IntersectionObserver" in window) {
        let lazyImageObserver = new IntersectionObserver(function(entries, observer) {
            entries.forEach(function(entry) {
                if (entry.isIntersecting) {
                    let lazyImage = entry.target;
                    if(lazyImage.hasAttribute("data-bg"))
                    {
						console.log('test');
                        lazyImage.style.backgroundImage = lazyImage.dataset.bg;
                    } else {
                        lazyImage.src = lazyImage.dataset.src;
                    }
                    lazyImage.classList.remove("lazy");
                    lazyImageObserver.unobserve(lazyImage);
                }
            });
        });

        lazyImages.forEach(function(lazyImage) {
            lazyImageObserver.observe(lazyImage);
        });
    } else {
        // Possibly fall back to a more compatible method here
        console.log('IntersectionObserver failed');
        var lazyloadThrottleTimeout;
        lazyloadImages = document.querySelectorAll(".lazy");

        function lazyload () {
            if(lazyloadThrottleTimeout) {
                clearTimeout(lazyloadThrottleTimeout);
            }

            lazyloadThrottleTimeout = setTimeout(function() {
                var scrollTop = window.pageYOffset;
                lazyloadImages.forEach(function(lazyImage) {
                    if(lazyImage.offsetTop < (window.innerHeight + scrollTop)) {
                        if(lazyImage.hasAttribute("data-bg"))
                        {
                            lazyImage.style.backgroundImage = lazyImage.dataset.bg;
                        } else {
                            lazyImage.src = lazyImage.dataset.src;
                        }
                        lazyImage.classList.remove('lazy');
                    }
                });
                if(lazyloadImages.length == 0) {
                    document.removeEventListener("scroll", lazyload);
                    window.removeEventListener("resize", lazyload);
                    window.removeEventListener("orientationChange", lazyload);
                }
            }, 20);
        }

        document.addEventListener("scroll", lazyload);
        window.addEventListener("resize", lazyload);
        window.addEventListener("orientationChange", lazyload);
    }

		$("#location_select").change(function() {
            window.location = $(this).find("option:selected").val();
        });

        $('.employee-btn').on('click', function() {
            $('#modal' + this.id).css("display", "flex");
        });

		$('.open-telemovement').on('click', function() {
           $('.telemovement-modal').css("display", "flex");
        });

        $('.close').on('click', function() {
           $('.modal').css("display", "none");
        });

        $(document).on('click', function(e) {
            if ($(e.target).hasClass("modal")){
                $('.modal').css("display", "none");
            }
        });


});
